{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-grid-select-column",
  "type": "registry:component",
  "title": "Data Grid Select Column",
  "description": "A reusable select column definition for the data grid with checkbox selection and shift-click support",
  "dependencies": [
    "@tanstack/react-table"
  ],
  "registryDependencies": [
    "checkbox"
  ],
  "files": [
    {
      "path": "src/components/data-grid/data-grid-select-column.tsx",
      "content": "\"use client\";\n\nimport type {\n  CellContext,\n  ColumnDef,\n  HeaderContext,\n} from \"@tanstack/react-table\";\nimport * as React from \"react\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useAsRef } from \"@/hooks/use-as-ref\";\nimport { cn } from \"@/lib/utils\";\n\nfunction DataGridSelectCheckbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof Checkbox>) {\n  return (\n    <Checkbox\n      className={cn(\n        \"after:-inset-2.5 relative transition-[shadow,border] after:absolute after:content-[''] hover:border-primary/40\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DataGridSelectHeader<TData>({ table }: HeaderContext<TData, unknown>) {\n  const tableRef = useAsRef(table);\n\n  const onCheckedChange = React.useCallback(\n    (value: boolean) => tableRef.current.toggleAllPageRowsSelected(value),\n    [tableRef],\n  );\n\n  return (\n    <DataGridSelectCheckbox\n      aria-label=\"Select all\"\n      checked={\n        table.getIsAllPageRowsSelected() ||\n        (table.getIsSomePageRowsSelected() && \"indeterminate\")\n      }\n      onCheckedChange={onCheckedChange}\n    />\n  );\n}\n\nfunction DataGridSelectCell<TData>({\n  row,\n  table,\n}: CellContext<TData, unknown>) {\n  const propsRef = useAsRef({\n    row,\n    onRowSelect: table.options.meta?.onRowSelect,\n  });\n\n  const onCheckedChange = React.useCallback(\n    (value: boolean) => {\n      const { row, onRowSelect } = propsRef.current;\n\n      if (onRowSelect) {\n        onRowSelect(row.index, value, false);\n      } else {\n        row.toggleSelected(value);\n      }\n    },\n    [propsRef],\n  );\n\n  const onClick = React.useCallback(\n    (event: React.MouseEvent) => {\n      if (event.shiftKey) {\n        event.preventDefault();\n        const { row, onRowSelect } = propsRef.current;\n\n        onRowSelect?.(row.index, !row.getIsSelected(), true);\n      }\n    },\n    [propsRef],\n  );\n\n  return (\n    <DataGridSelectCheckbox\n      aria-label=\"Select row\"\n      checked={row.getIsSelected()}\n      onCheckedChange={onCheckedChange}\n      onClick={onClick}\n    />\n  );\n}\n\nexport function getDataGridSelectColumn<TData>({\n  size = 40,\n  enableHiding = false,\n  enableResizing = false,\n  enableSorting = false,\n  ...props\n}: Partial<ColumnDef<TData>> = {}): ColumnDef<TData> {\n  return {\n    id: \"select\",\n    header: DataGridSelectHeader,\n    cell: DataGridSelectCell,\n    size,\n    enableHiding,\n    enableResizing,\n    enableSorting,\n    ...props,\n  };\n}\n",
      "type": "registry:component",
      "target": "src/components/data-grid/data-grid-select-column.tsx"
    },
    {
      "path": "src/hooks/use-as-ref.ts",
      "content": "import * as React from \"react\";\n\nimport { useIsomorphicLayoutEffect } from \"@/hooks/use-isomorphic-layout-effect\";\n\nfunction useAsRef<T>(props: T) {\n  const ref = React.useRef<T>(props);\n\n  useIsomorphicLayoutEffect(() => {\n    ref.current = props;\n  });\n\n  return ref;\n}\n\nexport { useAsRef };\n",
      "type": "registry:hook"
    },
    {
      "path": "src/hooks/use-isomorphic-layout-effect.ts",
      "content": "import * as React from \"react\";\n\nconst useIsomorphicLayoutEffect =\n  typeof window !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\n\nexport { useIsomorphicLayoutEffect };\n",
      "type": "registry:hook"
    }
  ]
}